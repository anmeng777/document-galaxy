---
title: 虚拟数字人搭建教程 -- 基于ue5和本地大模型
date: 2024-05-29 14:34:50
tags:
categories: metahuman
---

ue5创建项目，创建人物、创建摄像机等基础内容



参考教程：https://www.bilibili.com/video/BV1vG411k7hs



## 插件

* httpgpt：需要修改参数调整url和模型名称适配到本地ai
* 文字转语音：vits
* 语音识别：jvoice
* 本地大模型：RWKV





口型





## 过程记录

### 大模型接入

​		下载了视频中说的RWKV软件，感觉非常难用，对环境侵入也挺多的，因为想要使用他会自行给你安装python环境，还下载了许多包。由于对python不是很熟悉，感觉这种软件使用的体验非常差劲。

​		安装完成后，下载了同视频中一样的最小中文模型进行测试时发现，下载完成后，在聊天界面中却无法选择已下载的模型。还需要在聊天中选择模型，点击启动时提示没有模型需要下载，这时候下载才行。如果是这样的话，那么模型管理界面的存在就显得多余且让人混乱了。而且如果模型开始下载了只能进行暂停操作，无法取消。

​		我感觉还是使用ollama吧，ollama的使用体验真的是非常丝滑。



​		教程反复强调他们使用的httpgpt插件是基于原插件开源代码的修改版本，增加了可以自定义chatgpt的base url的功能。据此可以将本地适配了openai格式的大模型进行接入。

​		我根据他的思路，GitHub找到了这个插件 https://github.com/lucoiso/UEHttpGPT ，下载了同视频相近的版本1.5.1后，手动在插件中将openai域名进行了替换。

​		可是在蓝图中进行接入测试，得到了失望的结果，输入文字后只会进入到蓝图步骤的“error received”输出。盲猜除了替换域名外，可能还需要修改https为http的请求方式。



> 后来测试成功了，使用的还是蓝图插件方式，后来会看日志了，发现虽然改了代码，但是日志报错还是调用chatgpt官方api，经过对比发现插件其实会被ue5编译，我将编译结果删掉后重新打开ue5重新编译后就改过来了。而且虽然ollama兼容openai格式，但是却无法被插件接受，目前还是使用了RWKV测试成功。
>
> 后续还是将httpgpt改成http请求，将rwkv改为ollama，以便于更好的兼容性。
